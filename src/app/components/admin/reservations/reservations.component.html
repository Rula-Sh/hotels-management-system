<div class="d-flex">
  <h1 class="m-4">{{ "reservation.reservations" | translate }}</h1>
  <img
    class="fill-icon p-0"
    src="/assets/images/reservations-brown-filled-icon.png"
  />
</div>

<div class="page">
  @if(pendingReservations.length >0){
  <h1 class="m-4">{{ "reservation.pending" | translate }}</h1>
  <div class="rounded-4 shadow border overflow-hidden mb-5">
    <table class="table table-striped table-bordered mb-0">
      <thead>
        <tr>
          <th>{{ "shared.entity.id" | translate }}</th>
          <th>{{ "user.name" | translate }}</th>
          <th>{{ "shared.form.title" | translate }}</th>
          <th>{{ "room.type" | translate }}</th>
          <th>{{ "room.floor" | translate }}</th>
          <th>{{ "shared.form.price" | translate }}</th>
          <th>{{ "shared.action.key-name" | translate }}</th>
        </tr>
      </thead>
      <tbody>
        @for(reservation of pendingReservations; let i = $index; track i) {
        <tr>
          <td>{{ reservation?.id }}</td>
          <td>{{ reservation?.customer?.name || "" }}</td>
          <td>{{ reservation?.room?.title || "" }}</td>
          <td>{{ reservation?.room?.roomType || "" }}</td>
          <td>{{ reservation?.room?.floor }}</td>
          <td>{{ reservation?.room?.price }}</td>
          <td>
            <button
              class="details"
              (click)="showReservationDetails(reservation.id)"
            >
              <!-- <i class="bi bi-info-circle h5"></i> -->
              <i
                class="bi bi-info-circle-fill h5"
                [title]="'reservation.reservation-details' | translate"
              ></i>
              <!-- {{ "shared.action.details" | translate }} -->
            </button>
            <button
              class="approve"
              (click)="ApproveReservationRequest(reservation.id, reservation)"
            >
              <!-- <i class="bi bi-check-circle h5"></i> -->
              <i
                class="bi bi-check-circle-fill h5"
                [title]="'reservation.approve-reservation' | translate"
              ></i>
              <!-- {{ "shared.action.approve" | translate }} -->
            </button>
            <button
              class="reject"
              (click)="RejectReservationRequest(reservation.id, reservation)"
            >
              <!-- <i class="bi bi-x-circle-fill h5"></i> -->
              <i
                class="bi bi-x-circle-fill h5"
                [title]="'reservation.reject-reservation' | translate"
              ></i>
              <!-- {{ "shared.action.reject" | translate }} -->
            </button>
          </td>
        </tr>

        }
      </tbody>
    </table>
  </div>
  } @else {
  <h3 class="text-center mt-5">
    {{ "reservation.no-pending-reservations" | translate }}
  </h3>
  } @if(activeReservations.length > 0){
  <h1 class="m-4 mb-4">{{ "reservation.active" | translate }}</h1>
  <div class="rounded-4 shadow border overflow-hidden">
    <table class="table table-striped table-bordered mb-0">
      <thead>
        <tr>
          <th>{{ "shared.entity.id" | translate }}</th>
          <th>{{ "user.name" | translate }}</th>
          <th>{{ "shared.form.title" | translate }}</th>
          <th>{{ "room.type" | translate }}</th>
          <th>{{ "room.floor" | translate }}</th>
          <th>{{ "shared.form.price" | translate }}</th>
          <th>{{ "shared.action.key-name" | translate }}</th>
        </tr>
      </thead>
      <tbody>
        @for(reservation of activeReservations; let i = $index; track i) {
        <tr>
          <td>{{ reservation?.id }}</td>
          <td>{{ reservation?.customer?.name || "" }}</td>
          <td>{{ reservation?.room?.title || "" }}</td>
          <td>{{ reservation?.room?.roomType || "" }}</td>
          <td>{{ reservation?.room?.floor }}</td>
          <td>{{ reservation?.room?.price }}</td>
          <td>
            <button
              class="details"
              (click)="showReservationDetails(reservation.id)"
            >
              <!-- <i class="bi bi-info-circle h5"></i> -->
              <i
                class="bi bi-info-circle-fill h5"
                [title]="'reservation.reservation-details' | translate"
              ></i>
              <!-- {{ "shared.action.details" | translate }} -->
            </button>
          </td>
        </tr>

        }
      </tbody>
    </table>
  </div>
  } @else {
  <h3 class="text-center">
    {{ "reservation.no-active-reservations" | translate }}
  </h3>
  }
</div>
<p-toast />
<p-confirmdialog #cd>
  <ng-template pTemplate="footer">
    <button
      type="button"
      pButton
      icon="pi pi-times"
      label="Reject"
      [ngStyle]="{ backgroundColor: '#e09fa6', border: 'red' }"
      (click)="cd.onAccept()"
    ></button>

    <button
      type="button"
      pButton
      icon="pi pi-check"
      label="Cancel"
      [ngStyle]="{ backgroundColor: '#90c67c', border: 'green' }"
      (click)="cd.onReject()"
    ></button>
  </ng-template>
</p-confirmdialog>
